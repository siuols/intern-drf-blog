<!DOCTYPE html>
<html>
<head>
    <script src="jquery.js"></script>
  <title></title>
</head>
<body>
<div class="container">
     <form  method="POST"  enctype="multipart/form-data">
        <h2 class="form-signin-heading">Add Post</h2>
         <div>
             <label for="inputtitle" class="sr-only">title</label>
             <input type="title" id="inputtitle" class="form-control" placeholder="Title " required autofocus>
         </div>
         <div
             <label for="inputsub_title" class="sr-only">sub title</label>
             <input type="sub_title" id="inputsub_title" class="form-control" placeholder="Sub title" required autofocus>
         </div>
         <div class="thumbnails" style="width:400px;">
            <label class="cabinet BrandHeader">Banner Photo
            <input type="file" class="file" id="banner_photo" >
              </label>
         </div>
         <div
            <label for="inputbody" class="sr-only">Body</label>
            <input type="body" id="inputbody" class="form-control" placeholder="Text" required autofocus>
         </div>
         <div>
            <label for="inputblog" class="sr-only">Blog</label>
            <input type="blog" id="inputblog" class="form-control"  required autofocus>
         </div>
         <div>
            <label for="inputcategory" class="sr-only">Category</label>
            <input type="category" id="inputcategory" class="form-control"  required autofocus>
         </div>
         <div>
            <label for="inputtags" class="sr-only">Tags</label>
            <input type="tags" id="inputtags" class="form-control"  required autofocus>
         </div>
         <div>
            <label for="inputstatus" class="sr-only">status</label>
            <input type="status" id="inputstatus" class="form-control"  required autofocus>
         </div>
         <button id="submit" class="btn btn-lg btn-primary btn-block" type="submit">submit</button>
     </form>
 </div>
<script type="text/javascript">
//For doing AJAX post
//When submit is clicked
 $("#submit").click(function(e) {
//Prevent default submit. Must for Ajax post.Beginner's pit.
 e.preventDefault();
//Prepare csrf token
 var csrftoken = getCookie('csrftoken');
//Collect data from fields
var title = $('#inputtitle').val();
var sub_title = $('#inputsub_title').val();
var photo = $('#inputbanner_photo').val();
var body = $('#inputbody').val();
var blog = $('#inputblog').val();
var category = $('#inputcategory').val();
var tags = $('#inputtags').val();
var statu = $('#inputstatus').val();
//This is the Ajax post.Observe carefully. It is nothing but details of where_to_post,what_to_post
//Send data
 $.ajax({
       url : 'http://127.0.0.1:8000/api/post/', // the endpoint,commonly same url
       type : "POST", // http method
       data : { csrfmiddlewaretoken : csrftoken,
       title : title,
       sub_title : sub_title,
       photo : photo,
       body : body,
       blog : blog,
       category : category,
       tags : tags,
       status : status
 }, // data sent with the post request
 // handle a successful response
 success : function(json) {
 console.log(json); // another sanity check
 //On success show the data posted to server as a message
 alert('Post Added');
 },
 // handle a non-successful response
 error : function(xhr,errmsg,err) {
 console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
 }
 });
});
</script>
</body>
</html>
